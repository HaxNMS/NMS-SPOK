@echo off
setlocal EnableDelayedExpansion

set SRC_DIR=SHADERS\CODE
set DST_DIR=GAMEDATA\SHADERS\CODE\BIN\PC

set SRC=%SRC_DIR%\PSTREAM.SHADER.H

set INCLUDES=-I SHADERS\CODE

set DCONTEXT=-DD_CARDS
call glsl-x-spv.bat "%SRC%" "%DST_DIR%" "PSTREAM" "VERT FRAG" "PSTREAM_CARDS" "0" %INCLUDES% %DCONTEXT% || goto :end

set DCONTEXT=-DD_PSTREAM -DD_PSTREAM_STARS
call glsl-x-spv.bat "%SRC%" "%DST_DIR%" "PSTREAM" "VERT FRAG" "PSTREAM_STARS" "0" %INCLUDES% %DCONTEXT% || goto :end

set DCONTEXT=-DD_PSTREAM -DD_PSTREAM_STARS -DD_PSTREAM_SOLARSYSTEM
call glsl-x-spv.bat "%SRC%" "%DST_DIR%" "PSTREAM"      "FRAG" "PSTREAM_SYSTEM" "0" %INCLUDES% %DCONTEXT% || goto :end

set DCONTEXT=-DD_PSTREAM -DD_PSTREAM_FIELD
call glsl-x-spv.bat "%SRC%" "%DST_DIR%" "PSTREAM" "VERT FRAG" "PSTREAM_FIELD" "0" %INCLUDES% %DCONTEXT% || goto :end

:end
